name: Database Actions

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Set up MS SQL Server
      uses: potatoqualitee/mssqlsuite@v1.7
      with:
        install: sqlengine, sqlclient  # Customize the tools you want to install
        sa-password: ${{ secrets.DB_PASSWORD }} 
        collation: Latin1_General_CI_AS  # Customize collation if needed
        version: 2019  # Specify the SQL Server version
        show-log: true  # Optional, set to true to show logs

    - name: Run SQL scripts
      run: |
        sqlcmd -S localhost -U sa -P ${{ secrets.DB_PASSWORD }} -d EmployeeHub -i DatabaseAdministration/DataOps/SQLScripts/Emp_script1.sql

    - name: Complete the workflow
      run: echo "Database actions completed successfully"
